# README: API для реферальной системы

## Описание проекта
Этот проект представляет собой RESTful API сервис для реферальной системы. Сервис позволяет пользователям регистрироваться, управлять реферальными кодами, получать информацию о рефералах, а также использовать реферальные коды для регистрации.

## Функциональные возможности
- Регистрация и аутентификация пользователей (JWT, OAuth 2.0).
- Создание и удаление реферальных кодов с ограниченным сроком действия.
- Получение реферального кода по email реферера.
- Регистрация пользователей по реферальному коду.
- Получение информации о рефералах по ID реферера.
- UI-документация API в Swagger (/docs) и ReDoc (/redoc).

---

## Запуск проекта в Docker

### 1. Настройка окружения (.env)
Перед запуском проекта создайте файл **.env** в корневой директории и добавьте туда следующие переменные:

```env
# Основной домен
HOST_DOMAIN=127.0.0.1:8000

# Настройки почты
MAIL_USERNAME=tenpenni@mail.ru
MAIL_PASSWORD=тут_пароль_от_моей_почты
MAIL_FROM=tenpenni@mail.ru
MAIL_PORT=465
MAIL_SERVER=smtp.mail.ru
MAIL_TLS=True
MAIL_SSL=False
TEMPLATE_FOLDER=./templates

# Настройки БД
DB_USER=your_user
DB_PASSWORD=your_password
DB_HOST=postgres
DB_PORT=5432
DB_NAME=your_database

# JWT настройки
JWT_SECRET=your_jwt_secret_key
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
EMAIL_CONFIRMATION_EXPIRE_MINUTES=60

# Настройки Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
```

### 2. Запуск проекта
1. Убедитесь, что у вас установлен **Docker** и **Docker Compose**.
2. Выполните команду для сборки и запуска контейнеров:
   ```sh
   docker-compose up --build
   ```
3. После успешного запуска API будет доступен по адресу: `http://127.0.0.1:8000`

### 3. Проверка работы API
- **Swagger UI**: `http://127.0.0.1:8000/docs`
- **ReDoc**: `http://127.0.0.1:8000/redoc`

### 4. Остановка контейнеров
Чтобы остановить и удалить контейнеры, используйте команду:
```sh
docker-compose down
```

---

## Дополнительная информация
### Структура проекта
```
/trefproject
│── /app                # Исходный код приложения
│── /routes             # Определение маршрутов API
│── /models             # Описание моделей Pydantic
│── /schemas            # Схемы запросов и ответов
│── /database.py        # Подключение к базе данных
│── /config.py          # Конфигурация окружения
│── /main.py            # Точка входа API
│── /Dockerfile         # Описание сборки образа
│── /docker-compose.yml # Конфигурация сервисов
│── /requirements.txt   # Список зависимостей проекта
│── /.env               # Файл с переменными окружения
```

### Используемые технологии
- **FastAPI** – для разработки API
- **PostgreSQL** – для хранения данных
- **Redis** – для кэширования и фоновых задач
- **Docker/Docker Compose** – для контейнеризации
- **Pydantic** – для валидации данных
- **JWT** – для аутентификации пользователей
- **Swagger/ReDoc** – для автодокументирования API

---

## Контакты
Если у вас возникли вопросы или предложения, пишите на email: **tenpenni@mail.ru**. Я всё равно не отвечу.

